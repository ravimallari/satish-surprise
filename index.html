<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width" />

  <title>Surprise from CMS</title>
  <script type="text/javascript" src="./src/jquery.1.11.0.min.js"></script>
</head>

<body>
  <audio id="audio-element" src="./initilal-audio.mp3" type="audio/mpeg">
  </audio>
  <div id="canvas-scratch" class="scratchpad"></div>
  <style>
    .scratchpad {
      width: 450px;
      height: 450px;
      border: solid 10px #FFFFFF;
      margin: 0 auto;
    }

    body {
      user-select: none;
      background-image: url('./images/children.jpg');
    }
  </style>

  <script type="text/javascript" src="./src/wScratchPad.js"></script>
  <script type="text/javascript">
    var isSuccessfull = false;
    var isScratching = false;
    var audioElement = document.getElementById("audio-element");
    $('#canvas-scratch').wScratchPad({
      bg: './images/imagebg.jpg',
      fg: './images/imagefg.jpg',
      size: 45,
      scratchMove: function (e, percent) {
        if(!audioElement)
          return;
        if (percent > 65) {
          if (!isSuccessfull) {
            audioElement.setAttribute('src', './successful.mp3');
            audioElement.load();
            audioElement.play();
            isSuccessfull = true;
          }
        }
        else if (!isScratching) {
          audioElement.play();
          isScratching = true;
        }
      },
      scratchDown: function (e, percent) {
        if(!audioElement)
          return;
          
        audioElement.pause();
        isScratching = false;
      }
    });
  </script>

  </div>
  </div>
</body>

</html>